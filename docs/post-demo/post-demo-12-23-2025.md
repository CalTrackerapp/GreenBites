# Post-Demo Work - December 23, 2025

## Learning
- Debugging data persistence issues across frontend state and database
- How API payload shape impacts what gets stored in PostgreSQL
- Coordinating Context API state with server-calculated daily totals

## Challenges
- Sodium totals were correct immediately after logging a meal, but reset to 0 after logout/login
- Identifying the discrepancy between frontend-calculated sodium and database-stored sodium
- Tracing the flow from `AddMeal` → `/api/foods/fromNutrition` → `foods` table → `calculateTodayTotals`

## Victories
- Discovered that `sodium_mg` was not being sent in the `nutritionData` payload from `AddMeal`
- Updated `AddMeal` to include `sodium_mg` so `sodiumInMg` is persisted correctly in the `foods` table
- Confirmed that `calculateTodayTotals` and `/api/users/[username]/calorie-history` now return correct sodium values after re-login

## Additional Notes
- Old food entries created before this fix may still have `sodiumInMg = 0`; new logs are correct
- This bug only appeared after a full reload because frontend state was accurate but the database was missing sodium data
- This work improves trust in the dashboard’s sodium tracking and overall data integrity

